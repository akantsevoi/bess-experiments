<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Project • BESS Control Room</title>
    <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1"></script>
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <div class="brand">Control Room</div>
        <nav class="tabs">
          <a class="tab" href="index.html">← Back to Overview</a>
        </nav>
      </aside>
      <main class="content">
        <section class="view active">
          <header class="top-strip" id="projectHeader"></header>

          <section>
            <h2>Revenue Loss</h2>
            <div id="revKpis" class="kpis"></div>
            <div id="revDaily"></div>

            <div id="results">
              <h3>KPIs (from static dataset)</h3>
              <div id="kpis"></div>

              <h3>Per Battery Daily Summary</h3>
              <div id="summaryTable"></div>

              <h3>Per Slice Diff</h3>
              <div id="diffTable" class="table-container"></div>

              <div class="input-group"><label>Battery <select id="batterySelect"></select></label></div>
              <h3>Cumulative Revenue Over Time</h3>
              <canvas id="cumChart"></canvas>

              <h3>Loss Heatmap</h3>
              <div class="input-group"><label>Metric <select id="heatmapMetric"><option value="loss">Loss EUR</option><option value="error">Dispatch Error</option></select></label></div>
              <div id="heatmap" class="heatmap"></div>

              <h3>Availability Timeline</h3>
              <div id="availTimeline" class="heatmap"></div>

              <h3>Loss Breakdown by Cause</h3>
              <canvas id="lossBreakdown"></canvas>
            </div>
          </section>

          

          <section>
            <h2>Open BMS Errors</h2>
            <div id="bmsErrors"></div>
          </section>
        </section>
      </main>
    </div>

    <!-- Data -->
    <script src="data/projects.js"></script>
    <!-- Logic base utils -->
    <script src="js/util.js"></script>
    <script src="js/energy_utils.js"></script>
    <!-- Hardcoded revenue input datasets per project -->
    <script src="data/revenue-P-001.js"></script>
    <script src="data/revenue-P-002.js"></script>
    <script src="data/revenue-P-003.js"></script>
    <script src="data/revenue-P-004.js"></script>
    <!-- Project page logic (after datasets available) -->
    <script src="js/project.js"></script>
    <script src="js/revenue_static.js"></script>
  </body>
  </html>
